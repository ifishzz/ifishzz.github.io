<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="author" content="ifish">
		
		<meta name="generator" content="Hugo 0.54.0" />
		<title>linux capture bash scripts actions &middot; if1sh</title>
		<link rel="shortcut icon" href="https://ifishzz.github.io//images/favicon.ico">
		<link rel="stylesheet" href="https://ifishzz.github.io//css/style.css">
		<link rel="stylesheet" href="https://ifishzz.github.io//css/highlight.css">

		
		<link rel="stylesheet" href="https://ifishzz.github.io//css/font-awesome.min.css">
		

		
		<link href="https://ifishzz.github.io/index.xml" rel="alternate" type="application/rss+xml" title="if1sh" />
		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://ifishzz.github.io/'> <span class="arrow">←</span>Home</a>
	
	<a href='https://ifishzz.github.io//posts'>Archive</a>
	
	<a href='https://ifishzz.github.io//categories'>Cate</a>
	<a href='https://ifishzz.github.io//links'>Link</a>

	<a href='https://ifishzz.github.io//about'>About</a>

	

	
	<a class="cta" href="https://ifishzz.github.io/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        linux capture bash scripts actions
                    </h1>
                    <h2 class="headline">
                    Jan 31, 2019 00:00
                    · 258 words
                    · 1 minute read
                      <span class="tags">
                      
                      
                          
                              <a href="https://ifishzz.github.io//tags/shell">shell</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                  
                    <div id="toc">
                      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#shell">shell</a></li>
</ul></li>
</ul>
</nav>
                    </div>
                  
                
                <section id="post-body">
                    

<h2 id="shell">shell</h2>

<pre><code>#!/bin/bash
set -e
exec 3&gt;&amp;1 4&gt;&amp;2
trap 'exec 2&gt;&amp;4 1&gt;&amp;3' 0 1 2 3
exec 1&gt;log.out 2&gt;&amp;1
return＆exit 0
</code></pre>

<p>说明:</p>

<pre><code>0 - stdin 标准输入
1 - stdout 标准输出
2 - stderr 标准错误输出
</code></pre>

<p>exec 3&gt;&amp;1 4&gt;&amp;2</p>

<p>保存文件描述符，以便在重定向之前将它们还原为它们之前的任何内容，或者将它们用于输出到以下重定向之前的任何内容。</p>

<p>trap &lsquo;exec 2&gt;&amp;4 1&gt;&amp;3&rsquo; 0 1 2 3</p>

<p>恢复特定信号的文件描述符。通常不必要，因为当子shell退出时它们应该被恢复。</p>

<p>exec 1&gt;log.out 2&gt;&amp;1</p>

<p>重定向stdout到文件log.out然后重定向stderr到stdout。请注意，当您希望它们转到同一文件时，顺序很重要。在将stderr重定向到stdout之前，必须重定向stdout</p>

                </section>
            </article>

            
                

            

            

            

            <footer id="footer">
    
    
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/ifishzz">ifish</a>
    </p>
</footer>

        </section>

        <script src="https://ifishzz.github.io//js/jquery-3.3.1.min.js"></script>
<script src="https://ifishzz.github.io//js/main.js"></script>
<script src="https://ifishzz.github.io//js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  




    </body>
</html>
